let seleku_components_index=[{element:"config",inner:"",attribute:[{global:{value:"true"}}],child:[{element:"title",inner:"Hello world",attribute:[],child:[]},{element:"style",inner:".box{font-family: santuy;width: ;}",attribute:[{type:{value:"text/css"},ignore:{value:"true"}}],child:[]}]},{element:"h1",inner:"hello {nama}",attribute:[{class:{value:"box"},id:{value:"box1"}}],child:[{element:"span",inner:" tinggiku ",attribute:[],child:[]},{element:"p",inner:"haha",attribute:[],child:[{element:"b",inner:" {x}",attribute:[],child:[]}]}]}],sort_int=(e=[])=>{let n;for(let t=0;t<e.length;t++)for(let i=t;i<e.length;i++)e[t]>e[i]&&(n=e[t],e[t]=e[i],e[i]=n);let r=[];for(let t=0;t<e.length;t++)e[t]===e[t+1]?delete e[t]:r=[...r,e[t]];return e=[],r},clear_paste=(e=[],n="")=>{let r=[];if(n==="string"){for(let t=0;t<e.length;t++)for(let i=t;i<e.length;i++)e[t]===e[i]&&t!==i&&delete e[t];for(let t of e)t&&(r=[...r,t]);return r}if(n==="number")return sort_int(e);if(n==="object"&&e[0]instanceof Object){let t=[];for(let i of e)for(let o in i){t.push(o);break}for(let i=0;i<e.length;i++)for(let o=i;o<e.length;o++)for(let l of t)e[i].hasOwnProperty(l)&&e[i][l]===e[o][l]&&i!==o&&(e[i]={});for(let i of e)Object.keys(i).length>0&&r.push(i);return r}};class draw{property_basic=["element","inner","attribute","child"];parents=null;constructor(n,r){this.components=n,this.target=r}parent=null;render(){for(let n of this.property_basic){if(this.components.hasOwnProperty(n)||console.warn(`cannot find the property ${n}`),n==="element"&&(this.parent=document.createElement(this.components[n])),n==="inner"&&this.parent instanceof HTMLElement&&this.parent.append(this.components[n]),n==="attribute"&&this.components[n]instanceof Array)for(let r of this.components[n])for(let t in r)this.parent.setAttribute(t,r[t].value);if(n==="child"&&this.components[n]instanceof Array)for(let r of this.components[n])new draw(r,this.parent).render()}if(/\{.*?\}/igm.test(this.parent.innerHTML)){let n=this.parent.innerHTML.match(/\{.*?\}/igm);this.binding.push({element:this.parent,bind:n,inner:this.parent.innerHTML})}this.target.appendChild(this.parent),this.parents=this.parent}binding=[];reactivity(n){let r=this.parents;const t={set(i,o,l){o==="inner"&&(r.textContent=l,i[o]=l)},get(i,o){return i[o]}};return new Proxy(this.components,t)}}function replaceUsingIndex(e,n,r,t){return n>=e.length?e:e.substring(0,n)+t+e.substring(r)}function Reactivity(obj_,components){obj_ instanceof Object||console.warn("the reactivity need an object");function registerProperty(object,key){let value=object[key];Object.defineProperty(object,key,{get(){return value},set(args){console.log("haha");try{let mirror=null;for(let $components_ of components)for(let $i=0;$i<$components_.bind.length;$i++){let data=$components_.bind[$i]?.replace(/{/igm,"").replace(/}/igm,"").trim();mirror===null&&(mirror=$components_.inner),data===key.trim()&&(typeof args=="number"&&eval(`${data} = ${args}`),typeof args=="string"&&eval(`${data} = "${args}"`)),mirror=mirror.replace($components_.bind[$i],eval(data)),$components_.element.innerHTML=mirror}}catch(e){console.log(e)}}})}for(let e in obj_)obj_.hasOwnProperty(e)&&registerProperty(obj_,e);return obj_}class Ecosystem{constructor(n){this.object=n,this.binding=[],this.onDestroyEvent=null,this.$element=null}set create({target:n,onCreate:r=()=>{},onUpdate:t=()=>{},onDestroy:i=()=>{}}){let o=new draw(this.object,n);o.render(),r(o),this.onDestroyEvent=i,this.binding=o.binding,this.$element=this.binding[0].element}ctx=null;set bindingContext(n){let r=[];for(let i in n)r.push(i);let t=Reactivity(n,this.binding);this.ctx=t,t[r[0]]=t[r[0]]}get bindingContext(){return this.ctx}destroy(){this.$element.remove(),this.onDestroyEvent()}}let Seleku=e=>new Ecosystem(e),index=Seleku(seleku_components_index[1]),nama="ari susanto",x=100;index.create={target:document.body},index.bindingContext={nama,x};
